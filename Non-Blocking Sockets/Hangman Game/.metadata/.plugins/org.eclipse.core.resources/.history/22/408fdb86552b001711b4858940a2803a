package Main;

import java.nio.channels.*;
import java.util.Iterator;
import java.net.*;

public class Main {
	
	private static Iterator <SelectionKey> it;
	private static ServerSocketChannel ssc;
	public static Selector selector;
	private static SelectionKey k;
	private static int port;
	
	public static void main ( String [ ] args ) {
		
		try {
			ssc = ServerSocketChannel.open ( );
			ssc.configureBlocking ( false );
			ssc.setOption ( StandardSocketOptions.SO_REUSEADDR, true );
			port = 9709;
			ssc.socket ( ).bind ( new InetSocketAddress ( port ) );
			selector = Selector.open ( );
			ssc.register ( selector, SelectionKey.OP_ACCEPT );
			System.out.println ( "\n\n\tHangman Game... waiting for players." );
			String difficult = "";
			for ( ; ; ) {
				selector.select ( );
				it = selector.selectedKeys ( ).iterator ( );
				while ( it.hasNext ( ) ) {
					k = ( SelectionKey ) it.next ( );
					it.remove ( );
					if ( k.isAcceptable ( ) ) {
						Accept.acceptClient ( ssc );
					} // End if.
					if ( k.isReadable ( ) ) {
						
						continue;
					} else if ( k.isWritable ( ) ) {
						
						continue;
					} // End if - else.
				} // End while.
			} // End forever.
		} catch ( Exception e ) {
			e.printStackTrace ( );
		} // End try - catch;
		
	} // End main.

} // End class.